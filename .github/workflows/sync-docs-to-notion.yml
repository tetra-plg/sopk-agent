name: Sync Docs to Notion

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/**/*.md'
  workflow_dispatch:

jobs:
  sync-to-notion:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Push Markdown to Notion
      uses: xolvio/markdown-to-notion@v1
      with:
        notion-token: ${{ secrets.NOTION_TOKEN }}
        notion-page-id: ${{ secrets.NOTION_ROOT_PAGE_ID }}
        markdown-directory: './docs'
        recursive: true
        create-pages: true
        update-existing: true