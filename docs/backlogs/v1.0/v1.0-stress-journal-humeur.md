# ğŸ“ Plan de DÃ©veloppement - Feature Journal Humeur Rapide (MVP v1.0)

## ğŸ¯ Vue d'ensemble

### Description de la Feature
Interface ultra-simple permettant de noter son Ã©tat Ã©motionnel quotidien avec des Ã©mojis et une note rapide, intÃ©grÃ©e au journal quotidien existant pour crÃ©er une routine bien-Ãªtre.

### Valeur Utilisateur
- **Prise de conscience** : Comprendre ses patterns Ã©motionnels liÃ©s au SOPK
- **SimplicitÃ©** : Saisie en 10 secondes maximum, sans contrainte
- **CorrÃ©lations** : Lien avec symptÃ´mes physiques et cycles pour insights

### Score RICE
- **Reach** : 4/5 (80% des utilisatrices SOPK ont des variations d'humeur)
- **Impact** : 3/5 (outil de comprÃ©hension, moins d'impact immÃ©diat)
- **Confidence** : 5/5 (pattern interface Ã©prouvÃ©)
- **Effort** : 1/5 (extension du journal existant)
- **Score Final** : **60** âœ… **PrioritÃ© #2**

---

## ğŸ”„ Diagrammes de Flux

### User Journey - Saisie Humeur

```mermaid
flowchart TD
    A[Utilisatrice se connecte] --> B[Dashboard ou Journal]
    B --> C{Humeur du jour<br>dÃ©jÃ  saisie?}

    C -->|Non| D[Section Humeur visible]
    C -->|Oui| E[Affichage humeur actuelle]
    E --> F[Bouton 'Modifier']
    F --> D

    D --> G[SÃ©lection Emoji principal]
    G --> H[Slider Note /10]
    H --> I[Notes optionnelles courtes]
    I --> J{Veux ajouter<br>ressenti dÃ©taillÃ©?}

    J -->|Non| K[Sauvegarde auto]
    J -->|Oui| L[Tags Ã©motions rapides]
    L --> K

    K --> M[Feedback visuel confirmÃ©]
    M --> N[Retour dashboard avec mise Ã  jour]
    N --> O[Suggestion contextuelle]

    O --> P{Humeur basse<br>< 4/10?}
    P -->|Oui| Q[Proposition exercice respiration]
    P -->|Non| R[Encouragement positif]

    style A fill:#e1f5fe
    style G fill:#f3e5f5
    style K fill:#e8f5e8
    style Q fill:#ffcdd2
```

### Architecture Technique

```mermaid
graph TB
    subgraph "Module Stress (extension) - src/modules/stress/"
        A[MoodJournalView.jsx] --> B[MoodPicker.jsx]
        B --> C[EmojiSelector.jsx]
        B --> D[MoodSlider.jsx]
        B --> E[MoodTags.jsx]
        B --> F[MoodNotes.jsx]

        B --> G[useMoodJournal Hook]
        G --> H[moodValidation.js]
        G --> I[moodService.js]
    end

    subgraph "Extension Journal Cycle"
        J[DailyLogForm.jsx] --> B
        K[useDailySymptoms Hook] --> G
    end

    subgraph "Shared Components - src/shared/"
        L[EmojiPicker.jsx]
        M[QuickTags.jsx]
        N[ContextualSuggestion.jsx]
        O[useEmotionalContext Hook]
    end

    subgraph "Database - Supabase"
        I --> P[(daily_symptoms)]
        I --> Q[(mood_entries)]
    end

    C --> L
    E --> M
    B --> N
    G --> O

    style A fill:#e3f2fd
    style I fill:#c8e6c9
    style P fill:#ffcdd2
    style L fill:#fff3e0
```

### Flux de DonnÃ©es

```mermaid
sequenceDiagram
    participant U as Utilisatrice
    participant M as Mood Component
    participant H as Hook
    participant S as Service
    participant DB as Supabase
    participant C as Context Engine

    U->>M: SÃ©lectionne emoji ğŸ˜”
    M->>H: updateMood('sad', null)
    H->>H: Validation locale

    U->>M: Ajuste note Ã  3/10
    M->>H: updateMood('sad', 3)
    H->>S: saveMoodEntry() [debounced]

    S->>DB: UPSERT mood_entries
    DB-->>S: Success
    S-->>H: moodSaved

    H->>C: analyzeMoodContext(mood: 3)
    C-->>H: suggestions: ['breathing_exercise']
    H-->>M: showContextualSuggestions

    M-->>U: "Envie de te dÃ©tendre ? ğŸ§˜"

    Note over H: IntÃ©gration avec journal symptÃ´mes
    Note over C: Suggestions basÃ©es sur profil utilisateur
```

---

## ğŸ—ï¸ Architecture Technique

### Structure des DonnÃ©es

```sql
-- Extension table existante daily_symptoms avec colonnes mood
-- (dÃ©jÃ  prÃ©sentes d'aprÃ¨s le journal quotidien)

-- Table supplÃ©mentaire pour tracking Ã©motionnel dÃ©taillÃ©
CREATE TABLE mood_entries (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  date DATE NOT NULL,

  -- DonnÃ©es humeur principales
  primary_emotion VARCHAR(20) NOT NULL, -- 'happy', 'sad', 'anxious', 'calm', etc.
  mood_score INTEGER CHECK (mood_score >= 1 AND mood_score <= 10),

  -- Tags Ã©motionnels rapides (optionnel)
  emotion_tags TEXT[], -- ['stressed', 'tired', 'hopeful']

  -- Notes courtes (optionnel)
  mood_notes TEXT,

  -- Contexte pour suggestions
  context_triggers TEXT[], -- ['period_pain', 'work_stress', 'sleep_poor']

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  UNIQUE(user_id, date)
);

-- Index pour amÃ©liorer performances
CREATE INDEX idx_mood_entries_user_date ON mood_entries(user_id, date DESC);
CREATE INDEX idx_mood_entries_emotion ON mood_entries(user_id, primary_emotion, created_at DESC);
```

### Structure Modulaire

#### Extension Module Stress (`src/modules/stress/`)
```
src/modules/stress/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ mood/                         # Nouveau sous-dossier
â”‚   â”‚   â”œâ”€â”€ MoodPicker.jsx           # Composant principal humeur
â”‚   â”‚   â”œâ”€â”€ EmojiSelector.jsx        # SÃ©lecteur emoji principal
â”‚   â”‚   â”œâ”€â”€ MoodSlider.jsx           # Note /10 avec labels
â”‚   â”‚   â”œâ”€â”€ MoodTags.jsx             # Tags Ã©motions rapides
â”‚   â”‚   â”œâ”€â”€ MoodNotes.jsx            # Notes courtes optionnelles
â”‚   â”‚   â””â”€â”€ MoodContextualSuggestion.jsx # Suggestions basÃ©es contexte
â”‚   â””â”€â”€ [existing breathing components...]
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useMoodJournal.js            # Hook gestion humeur
â”‚   â”œâ”€â”€ useEmotionalContext.js       # Hook suggestions contextuelles
â”‚   â””â”€â”€ [existing hooks...]
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ moodService.js               # API calls humeur
â”‚   â””â”€â”€ [existing services...]
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ mood.types.js                # Types Ã©motions et moods
â”‚   â””â”€â”€ [existing types...]
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ MoodJournalView.jsx          # Point d'entrÃ©e mood seul
â”‚   â””â”€â”€ [existing views...]
â””â”€â”€ utils/
    â”œâ”€â”€ moodValidation.js            # Validation Zod humeur
    â”œâ”€â”€ emotionHelpers.js            # Helpers calculs Ã©motionnels
    â””â”€â”€ [existing utils...]
```

#### Extension Composants PartagÃ©s (`src/shared/`)
```
src/shared/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ EmojiPicker.jsx          # Picker emoji gÃ©nÃ©rique
â”‚   â”‚   â”œâ”€â”€ QuickTags.jsx            # Tags sÃ©lection rapide
â”‚   â”‚   â”œâ”€â”€ ContextualSuggestion.jsx # Suggestions intelligentes
â”‚   â”‚   â””â”€â”€ [existing UI components...]
â”‚   â””â”€â”€ selectors/
â”‚       â””â”€â”€ [existing selectors...]
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useEmotionalContext.js       # Hook contexte Ã©motionnel partagÃ©
â”‚   â””â”€â”€ [existing hooks...]
â””â”€â”€ utils/
    â”œâ”€â”€ emotionConstants.js          # Constantes Ã©mojis/Ã©motions
    â”œâ”€â”€ suggestionEngine.js          # Moteur suggestions
    â””â”€â”€ [existing utils...]
```

### Services API

```javascript
// src/modules/stress/services/moodService.js
export const moodService = {
  // Sauvegarder humeur du jour
  async saveMoodEntry(userId, date, moodData) {
    const { error } = await supabase
      .from('mood_entries')
      .upsert({
        user_id: userId,
        date,
        ...moodData,
        updated_at: new Date().toISOString()
      });
    return { error };
  },

  // RÃ©cupÃ©rer humeur d'une date
  async getMoodEntry(userId, date) {
    const { data, error } = await supabase
      .from('mood_entries')
      .select('*')
      .eq('user_id', userId)
      .eq('date', date)
      .single();
    return { data, error };
  },

  // Historique humeur pour patterns
  async getMoodHistory(userId, days = 30) {
    const startDate = new Date(Date.now() - days * 24 * 60 * 60 * 1000);
    const { data, error } = await supabase
      .from('mood_entries')
      .select('date, primary_emotion, mood_score, emotion_tags')
      .eq('user_id', userId)
      .gte('created_at', startDate.toISOString())
      .order('date', { ascending: false });
    return { data, error };
  },

  // Moyennes et trends pour dashboard
  async getMoodStats(userId, period = 'week') {
    // Logique de calcul moyennes, tendances, emotions frÃ©quentes
    // ...
    return { avgMood, trendDirection, commonEmotions };
  }
};
```

---

## ğŸ¨ Design UX/UI

### Interface Mobile-First

#### IntÃ©grÃ© au Journal Quotidien
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ“… Journal du jour    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Mer. 13 Sept. 2024    â”‚
â”‚  < Hier    Demain >     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚  ğŸ©¸ Mes rÃ¨gles          â”‚
â”‚  â—â—‹â—‹â—‹â—‹  Aucune         â”‚
â”‚                         â”‚
â”‚  ğŸ˜´ Ma fatigue          â”‚
â”‚  â—â—â—â—‹â—‹  ModÃ©rÃ©e        â”‚
â”‚                         â”‚
â”‚  ğŸ˜Š Mon humeur          â”‚
â”‚  [ğŸ˜”] [ğŸ˜] [ğŸ™‚] [ğŸ˜Š] [ğŸ˜„]â”‚
â”‚  Note: â—â—â—â—‹â—‹â—‹â—‹â—‹â—‹â—‹ 3/10  â”‚
â”‚  Ã‰tiquettes: StressÃ©e   â”‚
â”‚                         â”‚
â”‚  ğŸ’¡ Envie de te dÃ©tendre?â”‚
â”‚  ğŸ§˜ Essayer respiration â”‚
â”‚                         â”‚
â”‚  âœ… SauvegardÃ© !        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Standalone Humeur (accÃ¨s rapide)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ˜Š Comment Ã§a va ?   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚  Choisis ton Ã©motion :  â”‚
â”‚                         â”‚
â”‚  ğŸ˜¢  ğŸ˜”  ğŸ˜  ğŸ™‚  ğŸ˜Š  ğŸ˜„  â”‚
â”‚                         â”‚
â”‚  Note ton humeur :      â”‚
â”‚  â—â—â—â—â—‹â—‹â—‹â—‹â—‹â—‹  4/10      â”‚
â”‚                         â”‚
â”‚  ğŸ·ï¸ Ã‰tiquettes rapides   â”‚
â”‚  StressÃ©e  FatiguÃ©e     â”‚
â”‚  Anxieuse  Positive     â”‚
â”‚                         â”‚
â”‚  ğŸ“ Une note ? (optionnel) â”‚
â”‚  [Courte zone de texte] â”‚
â”‚                         â”‚
â”‚  ğŸ’¡ Suggestion :        â”‚
â”‚  Tes donnÃ©es montrent   â”‚
â”‚  que tu es souvent plus â”‚
â”‚  calme aprÃ¨s une respi  â”‚
â”‚                         â”‚
â”‚  [ğŸ§˜ Essayer maintenant] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Design System - Ã‰motions

```css
:root {
  /* Palette Ã©motionnelle */
  --emotion-very-sad: #F44336;      /* Rouge - trÃ¨s triste */
  --emotion-sad: #FF9800;           /* Orange - triste */
  --emotion-neutral: #9E9E9E;       /* Gris - neutre */
  --emotion-happy: #4CAF50;         /* Vert - content */
  --emotion-very-happy: #2196F3;    /* Bleu - trÃ¨s content */

  /* Ã‰tats mood slider */
  --mood-gradient: linear-gradient(
    to right,
    var(--emotion-very-sad) 0%,
    var(--emotion-sad) 25%,
    var(--emotion-neutral) 50%,
    var(--emotion-happy) 75%,
    var(--emotion-very-happy) 100%
  );

  /* Tags Ã©motionnels */
  --tag-selected: #E3F2FD;
  --tag-unselected: #F5F5F5;
  --tag-text-selected: #1976D2;
  --tag-text-unselected: #757575;
}

.mood-slider {
  background: var(--mood-gradient);
  height: 8px;
  border-radius: 4px;
  position: relative;
}

.emoji-button {
  font-size: 2rem;
  padding: 0.5rem;
  border-radius: 50%;
  transition: transform 0.2s ease;
}

.emoji-button:hover {
  transform: scale(1.2);
}

.emoji-button.selected {
  background: rgba(33, 150, 243, 0.1);
  transform: scale(1.3);
}
```

---

## ğŸ“± User Stories DÃ©taillÃ©es

### US1: Saisie Express
**En tant qu'** utilisatrice pressÃ©e
**Je veux** noter mon humeur en moins de 10 secondes
**Afin de** maintenir la routine sans effort

**CritÃ¨res d'acceptation** :
- [ ] Interface accessible depuis dashboard en 1 clic
- [ ] SÃ©lection emoji seule suffit (note /10 optionnelle)
- [ ] Sauvegarde instantanÃ©e aprÃ¨s sÃ©lection emoji
- [ ] Feedback visuel immÃ©diat de confirmation
- [ ] Pas de champs obligatoires autres que emoji

### US2: IntÃ©gration Journal
**En tant qu'** utilisatrice qui tient dÃ©jÃ  son journal SOPK
**Je veux** que l'humeur soit intÃ©grÃ©e dans ma routine quotidienne
**Afin d'** avoir une vision globale de ma santÃ©

**CritÃ¨res d'acceptation** :
- [ ] Section humeur visible dans le journal quotidien existant
- [ ] DonnÃ©es partagÃ©es avec le module symptÃ´mes
- [ ] Navigation fluide entre sections du journal
- [ ] Pas de duplication d'interface ou de saisie
- [ ] Export inclut humeur + symptÃ´mes ensemble

### US3: Suggestions Contextuelles
**En tant qu'** utilisatrice avec une humeur basse
**Je veux** des suggestions d'aide adaptÃ©es Ã  mon Ã©tat
**Afin de** savoir quoi faire pour aller mieux

**CritÃ¨res d'acceptation** :
- [ ] Suggestion automatique si humeur < 4/10
- [ ] Lien direct vers exercice respiration si disponible
- [ ] Messages bienveillants et non culpabilisants
- [ ] Suggestions basÃ©es sur mon historique et prÃ©fÃ©rences
- [ ] PossibilitÃ© d'ignorer/masquer sans impact nÃ©gatif

---

## ğŸ› ï¸ ImplÃ©mentation DÃ©taillÃ©e

### Sprint 1: Extension Journal (Semaine 1)
**Objectif** : IntÃ©grer humeur dans le journal quotidien existant

**TÃ¢ches** :
1. **Extension base de donnÃ©es**
   ```sql
   -- Les colonnes mood sont dÃ©jÃ  dans daily_symptoms
   -- Ajouter table complÃ©mentaire mood_entries
   CREATE TABLE mood_entries (
     -- voir structure complÃ¨te ci-dessus
   );
   ```

2. **Extension du hook journal existant**
   ```javascript
   // src/modules/cycle/hooks/useJournalForm.js (extension)
   import { useMoodJournal } from '../../stress/hooks/useMoodJournal';

   export const useJournalForm = (initialDate = new Date()) => {
     const [formData, setFormData] = useState({});
     const [currentDate, setCurrentDate] = useState(initialDate);

     // IntÃ©gration mood
     const moodJournal = useMoodJournal(currentDate);

     // Fonction update unifiÃ©e
     const updateField = (field, value) => {
       if (field.startsWith('mood_')) {
         moodJournal.updateMoodField(field, value);
       } else {
         // Logique existante symptÃ´mes
         const newData = { ...formData, [field]: value };
         setFormData(newData);
         triggerSave(newData);
       }
     };

     return {
       formData,
       currentDate,
       saveStatus,
       updateField,
       setCurrentDate,
       moodData: moodJournal.moodData,
       moodSuggestions: moodJournal.suggestions
     };
   };
   ```

3. **Composant MoodPicker intÃ©grÃ©**
   ```jsx
   // src/modules/stress/components/mood/MoodPicker.jsx
   import { EmojiSelector } from './EmojiSelector';
   import { MoodSlider } from './MoodSlider';
   import { MoodTags } from './MoodTags';

   export const MoodPicker = ({ value, onChange, compact = false }) => {
     const [selectedEmotion, setSelectedEmotion] = useState(value?.primary_emotion);
     const [moodScore, setMoodScore] = useState(value?.mood_score || 5);
     const [emotionTags, setEmotionTags] = useState(value?.emotion_tags || []);

     const handleEmotionChange = (emotion) => {
       setSelectedEmotion(emotion);
       const newValue = {
         ...value,
         primary_emotion: emotion,
         mood_score: moodScore,
         emotion_tags: emotionTags
       };
       onChange('mood', newValue);
     };

     if (compact) {
       // Version compacte pour intÃ©gration journal
       return (
         <div className="mood-picker-compact">
           <EmojiSelector
             selected={selectedEmotion}
             onSelect={handleEmotionChange}
             size="small"
           />
           <div className="mt-2 text-sm text-gray-600">
             Note: {moodScore}/10
           </div>
         </div>
       );
     }

     // Version complÃ¨te
     return (
       <div className="mood-picker space-y-4">
         <EmojiSelector
           selected={selectedEmotion}
           onSelect={handleEmotionChange}
         />
         <MoodSlider
           value={moodScore}
           onChange={setMoodScore}
         />
         <MoodTags
           selected={emotionTags}
           onSelectionChange={setEmotionTags}
         />
       </div>
     );
   };
   ```

### Sprint 2: Suggestions Contextuelles (Semaine 2)
**Objectif** : Intelligence Ã©motionnelle et suggestions

**TÃ¢ches** :
1. **Moteur de suggestions**
   ```javascript
   // src/shared/utils/suggestionEngine.js
   export class EmotionalSuggestionEngine {
     static getSuggestions(moodData, userHistory, availableModules) {
       const suggestions = [];

       // Humeur basse -> respiration
       if (moodData.mood_score <= 4) {
         if (availableModules.includes('breathing')) {
           suggestions.push({
             type: 'breathing_exercise',
             title: 'Envie de te dÃ©tendre ?',
             description: '5 minutes de respiration peuvent t\'aider',
             action: 'breathing/coherence',
             priority: 'high'
           });
         }
       }

       // Pattern stress rÃ©current -> suggestions prÃ©ventives
       const recentMoods = userHistory.filter(m =>
         m.emotion_tags?.includes('stressed') &&
         Date.now() - new Date(m.created_at) < 7 * 24 * 60 * 60 * 1000
       );

       if (recentMoods.length >= 3) {
         suggestions.push({
           type: 'pattern_insight',
           title: 'Tu sembles souvent stressÃ©e cette semaine',
           description: 'Veux-tu explorer des techniques anti-stress ?',
           action: 'stress/overview',
           priority: 'medium'
         });
       }

       return suggestions.sort((a, b) =>
         a.priority === 'high' ? -1 : 1
       );
     }
   }
   ```

2. **Hook contexte Ã©motionnel**
   ```javascript
   // src/modules/stress/hooks/useEmotionalContext.js
   import { useEffect, useState } from 'react';
   import { EmotionalSuggestionEngine } from '../../../shared/utils/suggestionEngine';
   import { moodService } from '../services/moodService';

   export const useEmotionalContext = (currentMood, userId) => {
     const [suggestions, setSuggestions] = useState([]);
     const [moodHistory, setMoodHistory] = useState([]);

     useEffect(() => {
       if (!currentMood || !userId) return;

       const loadContextAndSuggestions = async () => {
         // Charger historique rÃ©cent
         const { data: history } = await moodService.getMoodHistory(userId, 30);
         setMoodHistory(history || []);

         // GÃ©nÃ©rer suggestions
         const availableModules = ['breathing']; // MVP features
         const contextualSuggestions = EmotionalSuggestionEngine.getSuggestions(
           currentMood,
           history || [],
           availableModules
         );

         setSuggestions(contextualSuggestions);
       };

       loadContextAndSuggestions();
     }, [currentMood, userId]);

     return { suggestions, moodHistory };
   };
   ```

3. **Composant suggestions**
   ```jsx
   // src/shared/components/ui/ContextualSuggestion.jsx
   import { Link } from 'react-router-dom';

   export const ContextualSuggestion = ({ suggestions = [] }) => {
     if (!suggestions.length) return null;

     const primarySuggestion = suggestions[0]; // Prendre la plus prioritaire

     return (
       <div className="contextual-suggestion bg-blue-50 rounded-lg p-4 mt-4">
         <div className="flex items-start gap-3">
           <span className="text-2xl">ğŸ’¡</span>
           <div className="flex-1">
             <h4 className="font-medium text-blue-900 mb-1">
               {primarySuggestion.title}
             </h4>
             <p className="text-sm text-blue-700 mb-3">
               {primarySuggestion.description}
             </p>
             <Link
               to={`/${primarySuggestion.action}`}
               className="inline-block bg-blue-500 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600"
             >
               ğŸ§˜ Essayer maintenant
             </Link>
           </div>
         </div>
       </div>
     );
   };
   ```

### Sprint 3: Polish et IntÃ©gration (Semaine 3)
**Objectif** : Finitions UX et tests d'intÃ©gration

**TÃ¢ches** :
1. **IntÃ©gration complÃ¨te dans DailyLogForm**
   ```jsx
   // src/modules/cycle/components/DailyLogForm.jsx (extension)
   import { MoodPicker } from '../../stress/components/mood/MoodPicker';
   import { ContextualSuggestion } from '../../../shared/components/ui/ContextualSuggestion';

   export const DailyLogForm = ({ data, onFieldChange }) => {
     return (
       <div className="daily-log-form space-y-6">
         {/* Sections existantes */}
         <PeriodSlider ... />
         <SymptomSlider label="Fatigue" ... />
         <SymptomSlider label="Douleurs" ... />

         {/* Nouvelle section Humeur */}
         <div className="mood-section">
           <h3 className="text-lg font-medium mb-3 flex items-center gap-2">
             ğŸ˜Š Mon humeur
           </h3>
           <MoodPicker
             value={data.mood}
             onChange={onFieldChange}
             compact={true}
           />
         </div>

         {/* Notes existantes */}
         <NotesField ... />

         {/* Suggestions contextuelles */}
         <ContextualSuggestion suggestions={data.moodSuggestions} />
       </div>
     );
   };
   ```

2. **Animation et microinteractions**
   ```css
   /* Animations pour feedback Ã©motionnel */
   .emoji-button {
     transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
   }

   .emoji-button:hover {
     transform: scale(1.15) rotate(5deg);
   }

   .emoji-button.selected {
     animation: emotionSelected 0.6s ease;
   }

   @keyframes emotionSelected {
     0% { transform: scale(1); }
     50% { transform: scale(1.3) rotate(-5deg); }
     100% { transform: scale(1.1); }
   }

   .contextual-suggestion {
     animation: slideIn 0.4s ease-out;
   }

   @keyframes slideIn {
     from {
       opacity: 0;
       transform: translateY(20px);
     }
     to {
       opacity: 1;
       transform: translateY(0);
     }
   }
   ```

---

## ğŸ§ª Tests & Validation

### Tests Unitaires (Vitest)
```javascript
describe('useMoodJournal Hook', () => {
  test('met Ã  jour Ã©motion et dÃ©clenche sauvegarde', async () => {
    const { result } = renderHook(() => useMoodJournal());

    act(() => {
      result.current.updateMoodField('primary_emotion', 'happy');
    });

    expect(result.current.moodData.primary_emotion).toBe('happy');

    await waitFor(() => {
      expect(mockMoodService.saveMoodEntry).toHaveBeenCalledWith(
        expect.any(String),
        expect.any(String),
        expect.objectContaining({ primary_emotion: 'happy' })
      );
    });
  });

  test('gÃ©nÃ¨re suggestions contextuelles appropriÃ©es', async () => {
    const lowMoodData = { mood_score: 3, primary_emotion: 'sad' };
    const { result } = renderHook(() => useEmotionalContext(lowMoodData, 'user-123'));

    await waitFor(() => {
      expect(result.current.suggestions).toHaveLength(1);
      expect(result.current.suggestions[0].type).toBe('breathing_exercise');
    });
  });
});
```

### Tests d'IntÃ©gration
```javascript
describe('Mood Journal Integration', () => {
  test('flow complet dans journal quotidien', async () => {
    render(<DailyJournalView />);

    // SÃ©lectionner Ã©motion
    const sadEmoji = screen.getByRole('button', { name: /ğŸ˜”/ });
    fireEvent.click(sadEmoji);

    // VÃ©rifier sauvegarde
    await waitFor(() => {
      expect(screen.getByText(/sauvegardÃ©/i)).toBeInTheDocument();
    });

    // VÃ©rifier suggestion contextuelle
    expect(screen.getByText(/envie de te dÃ©tendre/i)).toBeInTheDocument();
    expect(screen.getByText(/essayer respiration/i)).toBeInTheDocument();
  });

  test('intÃ©gration avec module respiration', async () => {
    render(<DailyJournalView />);

    // Saisir humeur basse
    fireEvent.click(screen.getByRole('button', { name: /ğŸ˜”/ }));

    // Cliquer sur suggestion respiration
    const breathingLink = screen.getByText(/essayer maintenant/i);
    fireEvent.click(breathingLink);

    // VÃ©rifier navigation vers module respiration
    expect(mockNavigate).toHaveBeenCalledWith('/breathing/coherence');
  });
});
```

### CritÃ¨res de Validation MVP
- [ ] **RapiditÃ©** : Saisie Ã©motions < 10 secondes
- [ ] **Adoption** : 70% des utilisatrices journal utilisent aussi humeur
- [ ] **Pertinence** : Suggestions suivies dans 40%+ des cas humeur basse
- [ ] **IntÃ©gration** : 0 feedback nÃ©gatif sur complexification du journal
- [ ] **Engagement** : Maintien routine journal quotidien (pas de baisse)

---

## ğŸš€ DÃ©ploiement & Monitoring

### Variables d'Environnement
```env
# Configuration suggestions
VITE_MOOD_SUGGESTION_THRESHOLD=4
VITE_ENABLE_MOOD_PATTERNS=true
VITE_MOOD_HISTORY_DAYS=30

# Feature flags
VITE_ENABLE_EMOTION_TAGS=true
VITE_ENABLE_MOOD_INSIGHTS=false
```

### MÃ©triques ClÃ©s
```javascript
// Analytics events pour humeur
const trackMoodEvents = {
  mood_entered: (emotion, score) => analytics.track('Mood Entered', {
    emotion,
    score,
    entry_method: 'daily_journal'
  }),
  mood_suggestion_shown: (suggestion_type, mood_score) => analytics.track('Mood Suggestion Shown', {
    suggestion_type,
    mood_score
  }),
  mood_suggestion_clicked: (suggestion_type, mood_score) => analytics.track('Mood Suggestion Clicked', {
    suggestion_type,
    mood_score,
    conversion_rate: 'to_calculate'
  }),
  mood_pattern_detected: (pattern_type, frequency) => analytics.track('Mood Pattern Detected', {
    pattern_type,
    frequency
  }),
  emoji_usage: (emoji, context) => analytics.track('Emoji Used', { emoji, context })
};
```

### Dashboard Monitoring
- **Usage** : % utilisatrices journal qui remplissent aussi l'humeur
- **Patterns** : Ã‰motions les plus frÃ©quentes et corrÃ©lations avec symptÃ´mes
- **Suggestions** : Taux de clic sur suggestions contextuelles
- **Impact** : Effet des suggestions sur humeur suivante (A/B testing)

---

## ğŸ”„ Ã‰volutions Post-MVP

### Version 1.1
- **Patterns visuels** : Graphiques d'Ã©volution humeur sur 7/30 jours
- **Tags personnalisÃ©s** : Utilisatrice peut crÃ©er ses propres Ã©tiquettes
- **CorrÃ©lations automatiques** : "Tu es plus positive les jours oÃ¹ tu bouges"

### Version 1.2
- **Mood insights** : Analyses prÃ©dictives basÃ©es sur historique
- **Partage anonyme** : Comparaison avec moyennes communautÃ© SOPK
- **IntÃ©gration wearables** : Import donnÃ©es stress Apple Watch/Fitbit

---

## âœ… Definition of Done

### CritÃ¨res Techniques
- [ ] Code reviewÃ© et couvert Ã  90%+ par les tests
- [ ] IntÃ©gration sans rÃ©gression avec journal quotidien existant
- [ ] Performance maintenue malgrÃ© fonctionnalitÃ© supplÃ©mentaire
- [ ] Suggestions contextuelles testÃ©es sur 10+ scÃ©narios utilisateur
- [ ] Migration base de donnÃ©es sans perte de donnÃ©es existantes

### CritÃ¨res Utilisateur
- [ ] Tests utilisateur confirment simplicitÃ© (< 10s pour Ã©motion)
- [ ] 0 feedback sur surcharge cognitive vs journal actuel
- [ ] Suggestions perÃ§ues comme utiles et non intrusives
- [ ] Ã‰mojis culturellement appropriÃ©s et inclusifs
- [ ] AccessibilitÃ© complÃ¨te (lecteurs d'Ã©cran)

### CritÃ¨res Business
- [ ] Analytics configurÃ©s pour mesurer impact Ã©motionnel
- [ ] IntÃ©gration avec futur module insights/dashboard
- [ ] Plan de contenu pour gestion des humeurs extrÃªmes
- [ ] Documentation support client mise Ã  jour

---

*ğŸ“‹ Cette feature transforme le journal quotidien en outil de bien-Ãªtre Ã©motionnel tout en restant simple et intÃ©grÃ©e Ã  l'expÃ©rience utilisateur existante.*